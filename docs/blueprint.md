# **App Name**: São José Cordas

## Core Features:

- Real-Time Order Creation and Management: Allow multiple users to create and manage orders simultaneously, with real-time updates and quantity reservation using Firestore. Implement quantity reservation lock (not for the entire material) when the seller blurs qtyRequested (event B). If available is insufficient, do NOT block editing/saving: Reserve only the available portion (qtyReserved = min(qtyRequested, available)). The remainder becomes qtyToProduce automatically.  UI must show per item: qtyRequested, qtyReservedFromStock, qtyToProduce, onHand/reservedTotal/available. Reservation TTL: 5 minutes, extended (“heartbeat”) on user activity in the order screen (any change extends expiresAt by +5 min). If no activity, reservation is released.
- Material and UoM Management: Enable administrators to manage materials, units of measure (UoMs), and production configurations through a user-friendly interface. Seed UoMs are mandatory. UoM conversions: optional and configurable (not forced). Materials must have production configuration: setupTime + timePerUnit (per standard UoM), besides free fields for item condition in the order using Firestore.
- Automated Stock Allocation and Production Task Generation: Automatically allocate stock and generate production tasks when items are short in stock based on priority and due date using Firestore and Cloud Functions. When saving/updating an order: calculate 'qtyFromStock' vs 'qtyToProduce'. Surplus automatically becomes a Production Task (without blocking the order). Production entry confirmation flow (required by Input Operator): Completing a production task must NOT directly increase stockBalances.  Instead, completion generates a Pending Inventory Entry record (draft receipt) that the Input Operator must confirm: inventoryReceipts {type: PRODUCTION, status: DRAFT|POSTED, items[], sourceRef} In the Inventory (Input Operator) screen, when opening a DRAFT receipt: show “There are X open demands for this material. Auto-allocate now? Yes/No”. If Yes: post the receipt (IN), auto-allocate produced qty to outstanding demands by (priority, order date), generate notifications to Picker(s) for newly-available quantities (partial/integral), update productionTasks items (reduce qtyToProduce) and mark DONE when fully satisfied. If No: post the receipt only (IN) and do not allocate automatically.
- Role-Based Access Control (RBAC): Implement a role-based access control system with predefined roles: Admin, Manager (Gestor), Seller (Vendedor), Input Operator (Entrada), Production Operator (Produção), Picker. Fixed roles: Admin, Manager (Gestor), Seller (Vendedor), Input Operator (Entrada), Production Operator (Produção), Picker. Critical rule: stock changes (OUT, reservedTotal, critical status) only via Cloud Functions; UI does not write directly to these collections. The picker does not change order items (qtyRequested, customer, etc.), only qtySeparated and completion using Firestore.
- Automated label and QR code generation for picking: Label and QR code generator for package management using cloud functions, linking to relevant order information and enhancing picking accuracy. Mandatory label. Recommendation: 1 label per volume (1/N, 2/N…). PDF via Cloud Function + Storage; save URLs in the order; reprinting with audit trail. The QR code encodes the order number (YYYY-MM-#####) and (optional) the volume index. Generate 1 label per volume (mandatory). Minimum label contents: Order number (YYYY-MM-#####) + QR, Volume i/N, Priority, Item list (material, measure, color, qtyRequested, qtySeparated), Picker + timestamps (when concluded), Reprints logged in audit trail.
- Inventory Monitoring and Alerts: Alerts the input operator about inventory issues. Minimum alerts: below minimum, at the order point, rupture (when qtyRequested > available), and production pending by material. An internal inbox (notifications collection) is sufficient for the prototype; push can be left for later.
- Predictive Stock Management Tool: Uses historical data and machine learning to forecast demand and suggest optimal stock levels, minimizing shortages and overstocking. Marked as Phase 2 / optional: do not block the operational prototype. Define what is 'historical' (stockMoves OUT + seasonality by period). Genkit/Gemini as a tool that recommends: suggested reorderPoint, suggested minStock, and suggestedQty considering lead time and open orders. Save recommendations in mrpSuggestions and require human action (Manager) to 'apply' parameters. The AI will act as a 'tool', where it intelligently assesses inventory needs and provides recommendations that considers various operational factors, such as current stock levels, upcoming orders, and lead times.

## Style Guidelines:

- Primary color: Deep teal (#008080) to convey trust and efficiency.
- Background color: Light gray (#F0F8FF) for a clean and professional interface.
- Accent color: Bright cyan (#00FFFF) for highlighting interactive elements and key metrics.
- Body font: 'Inter' (sans-serif) for a modern and readable interface.
- Headline font: 'Space Grotesk' (sans-serif) for bold headlines
- Code font: 'Source Code Pro' for displaying code snippets.
- Use consistent, simple icons to represent actions and statuses within the application.
- Employ a clear, tab-based layout for navigating between different modules such as Orders, Inventory, Production, Picking, Indicators, Admin. Requirement addition: in the order item, allow 'specific condition' (custom fields) and optional 'save as template'.
- Subtle animations, like transitions and loading indicators, will be incorporated to enhance user experience without being intrusive.